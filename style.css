/* === SYSTEM STYLES === */
body { 
    height: 100vh; 
    height: 100dvh; 
    -webkit-tap-highlight-color: transparent;
    overscroll-behavior: none; 
}

/* === ANIMASI POPUP (BARU) === */
@keyframes popupOpen {
    0% { transform: scale(0.5); opacity: 0; }
    80% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

.animate-popup-content {
    animation: popupOpen 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* === PRINT STYLES === */
#print-area { display: none; }
@media print {
    body * { visibility: hidden; }
    #print-area, #print-area * { visibility: visible; }
    #print-area { display: block !important; position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; }
    
    .print-invoice { font-family: 'Courier New', Courier, monospace; font-size: 11px; width: 58mm; color: black; padding-bottom: 20px; padding-right: 2mm;}
    .print-invoice .header { text-align: center; margin-bottom: 10px; }
    .print-invoice .logo { width: 40px; height: 40px; object-fit: contain; margin: 0 auto; display: block; }
    .print-invoice .shop-name { font-weight: bold; font-size: 14px; margin-top: 5px; text-transform: uppercase; }
    .print-invoice .divider { border-bottom: 1px dashed black; margin: 5px 0; }
    .print-invoice .item-row { margin-bottom: 4px; display: flex; flex-direction: column; }
    .print-invoice .item-main { display: flex; justify-content: space-between; align-items: flex-start; font-weight: bold; }
    .print-invoice .item-name { flex: 1; padding-right: 5px; word-wrap: break-word; }
    .print-invoice .item-price { white-space: nowrap; text-align: right; min-width: 60px; }
    .print-invoice .item-addon { font-size: 9px; color: #333; margin-left: 10px; font-style: italic; display: block; }
    .print-invoice .total-section { margin-top: 5px; }
    .print-invoice .row-summary { display: flex; justify-content: space-between; margin-bottom: 2px; }
    .print-invoice .label { font-weight: bold; }
    .print-invoice .val { font-weight: bold; text-align: right; }
    .print-invoice .grand-total { font-size: 16px; font-weight: 900; }
    .print-invoice .payment-badge { margin-top: 10px; border: 2px solid black; padding: 4px; text-align: center; font-weight: 900; font-size: 14px; letter-spacing: 2px; text-transform: uppercase; border-radius: 4px; }

    .print-dapur { font-family: Arial, sans-serif; width: 58mm; color: black; padding-right: 2mm; }
    .print-dapur .header { text-align: center; font-weight: 900; font-size: 18px; border: 3px solid black; padding: 5px; margin-bottom: 10px; text-transform: uppercase; line-height: 1.2; }
    .print-dapur .meta { font-size: 12px; margin-bottom: 10px; border-bottom: 2px solid black; padding-bottom: 5px; }
    .print-dapur .item { margin-bottom: 15px; border-bottom: 1px dashed #aaa; padding-bottom: 5px; display: flex; align-items: start; }
    .print-dapur .qty { font-size: 26px; font-weight: 900; min-width: 35px; margin-right: 5px; line-height: 1; }
    .print-dapur .name { font-size: 16px; font-weight: bold; line-height: 1.2; }
    .print-dapur .details { flex: 1; }
    .print-dapur .addon-badge { font-weight: bold; font-size: 12px; border: 1px solid black; padding: 1px 4px; display: inline-block; margin-top: 2px; border-radius: 4px; margin-right: 2px;}
    .print-dapur .note { font-style: italic; font-size: 12px; margin-top: 2px; color: #333; }
}

/* UI Styles */
.numpad-btn { transition: all 0.1s; }
.numpad-btn:active { transform: scale(0.95); }
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: #f1f1f1; }
::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
.active-nav { color: #ef4444; background-color: #fef2f2; border-radius: 8px; }
.active-nav-mobile { color: #ef4444; }
.active-filter { background-color: #ef4444 !important; color: white !important; border-color: #ef4444 !important; }
.mobile-nav-height { height: 60px; }

/* Mobile Cart */
@media (max-width: 768px) {
    .mobile-cart-container { position: fixed; bottom: 0; left: 0; right: 0; z-index: 100; width: 100%; background: white; border-top-left-radius: 1.5rem; border-top-right-radius: 1.5rem; box-shadow: 0 -5px 25px rgba(0,0,0,0.15); height: 85vh !important; transform: translateY(110%); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; flex-direction: column; }
    .cart-toggle-handle { display: none !important; }
    .box-menu-list { height: 85vh !important; min-height: 600px; }
}
@media (min-width: 769px) {
    .mobile-cart-container { position: static !important; height: 100% !important; width: 24rem !important; border-radius: 0 !important; transform: none !important; box-shadow: none !important; display: flex; flex-direction: column; border-left: 1px solid #e5e7eb; }
    .cart-toggle-handle { display: none !important; }
    #cart-items, #cart-header { display: block !important; }
    #drag-handle { display: none !important; } 
    #floating-cart-wrapper { display: none !important; } 
    .box-menu-list { height: auto !important; flex: 1; }
}

.sheet-handle-area { touch-action: none; cursor: grab; width: 100%; display: flex; justify-content: center; padding-top: 15px; padding-bottom: 10px; background: white; border-top-left-radius: 1.5rem; border-top-right-radius: 1.5rem; flex-shrink: 0; }
.sheet-handle-area:active { cursor: grabbing; }
.is-dragging { transition: none !important; }

#floating-cart-wrapper { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s; transform: scale(1); }
#floating-cart-wrapper.hidden-fab { transform: translateY(100px) scale(0.5); opacity: 0; pointer-events: none; }
.badge-pop { animation: badgePop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes badgePop { 0% { transform: scale(1); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } }

@keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); } 20%, 40%, 60%, 80% { transform: translateX(4px); } }
.animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-color: #ef4444 !important; background-color: #fef2f2 !important; }

.checkmark-circle { width: 80px; height: 80px; position: relative; display: inline-block; vertical-align: top; margin-bottom: 20px;}
.checkmark-circle .background { width: 80px; height: 80px; border-radius: 50%; background: #22c55e; position: absolute; }
.checkmark-circle .checkmark { border-radius: 5px; }
.checkmark-circle .checkmark.draw:after { animation-duration: 800ms; animation-timing-function: ease; animation-name: checkmark; transform: scaleX(-1) rotate(135deg); }
.checkmark-circle .checkmark:after { opacity: 1; height: 40px; width: 20px; transform-origin: left top; border-right: 10px solid white; border-top: 10px solid white; content: ''; left: 20px; top: 40px; position: absolute; }
@keyframes checkmark { 0% { height: 0; width: 0; opacity: 1; } 20% { height: 0; width: 20px; opacity: 1; } 40% { height: 40px; width: 20px; opacity: 1; } 100% { height: 40px; width: 20px; opacity: 1; } }

#toast-container { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 100; pointer-events: none; transition: all 0.3s; opacity: 0; }
#toast-container.show { bottom: 100px; opacity: 1; }

.grayscale { filter: grayscale(100%); opacity: 0.6; }
.chart-btn { transition: all 0.2s; }
.chart-btn.active { background-color: #3b82f6; color: white; border-color: #3b82f6; }